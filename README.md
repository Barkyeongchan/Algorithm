# ì•Œê³ ë¦¬ì¦˜(Algorithm)
ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì ˆì°¨ë‚˜ ë°©ë²•ì„ ëª…í™•í•˜ê²Œ ì •ì˜í•œ ë‹¨ê³„ì ì¸ ëª…ë ¹ì–´ë“¤ì˜ ì§‘í•©

## êµì¬ ëª©ì°¨ ì§€ë„
<img width="1152" height="768" alt="image" src="https://github.com/user-attachments/assets/4393ccf3-4568-4afc-ba38-38085a782576" />


## 1. ì •ë ¬(Sort)
ë°ì´í„°ë¥¼ ì¼ì •í•œ ê¸°ì¤€ì— ë”°ë¼ ìˆœì„œëŒ€ë¡œ(ì˜¤ë¦„ì°¨ìˆœ ë˜ëŠ” ë‚´ë¦¼ì°¨ìˆœ) ë‚˜ì—´í•˜ëŠ” ì‘ì—…

<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/2a99c23a-d34f-4dd8-914d-8c90090b27a2" />

## 2. ìŠ¬ë¼ì´ë”© ìœˆë„ìš°(Sliding Window)
ë°ì´í„°ì˜ íŠ¹ì • ë²”ìœ„ë¥¼ ì •í•´ë†“ê³  ì •í•´ì§„ í¬ê¸°ë§Œí¼ ì´ë™ì‹œì¼œ ê°’ì„ êµ¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜

<img width="1983" height="1216" alt="image" src="https://github.com/user-attachments/assets/bf1f6383-c375-41bd-a3d7-6c1e4cdb002d" />

## 3. ê·¸ë¦¬ë”” ì•Œê³ ë¦¬ì¦˜(Greedy Algorithm)
í˜„ì¬ ìƒí™©ì—ì„œ ìµœì ì˜ ì„ íƒì„ ë°˜ë³µí•˜ì—¬ ìµœì¢… ê²°ê³¼ê°’ì„ êµ¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜

<img width="759" height="509" alt="image" src="https://github.com/user-attachments/assets/43592d5c-c025-48cf-9fba-c5c41fa8edad" />

## 4. Python3 Turtle ë¡œë´‡ ì•Œê³ ë¦¬ì¦˜
python3ì˜ turtleì„ í™œìš©í•˜ì—¬ ë¡œë´‡ ì œì–´ ì•Œê³ ë¦¬ì¦˜ì„ ìµíŒë‹¤.

<img width="428" height="372" alt="image" src="https://github.com/user-attachments/assets/58513359-4048-4622-b02c-9015ad6e9b0c" />


ğŸš€ FastAPI ì„œë²„ êµ¬ì¶• ë° ROS â†’ ë¡œì»¬ â†’ EC2 â†’ ì›¹ í´ë¼ì´ì–¸íŠ¸ ì‹¤ì‹œê°„ ì—°ê²°

ê¸°ì¡´ Spring Boot WMS ì„œë²„ë¥¼ FastAPI ê¸°ë°˜ìœ¼ë¡œ ì™„ì „íˆ ì´ì‹í•œ ë²„ì „ì…ë‹ˆë‹¤.
AWS EC2ì— ë°°í¬í•˜ì—¬ ROS ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì— í‘œì‹œí•˜ëŠ” êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

ğŸ“Œ ê°œìš”
ğŸ§© ì „ì²´ íë¦„
ROS â†’ ë¡œì»¬(roslibpy) â†’ EC2(FastAPI /ws) â†’ WebClient(JavaScript)

ğŸ§± FastAPI ì£¼ìš” íŠ¹ì§•

ğŸ§  Python ê¸°ë°˜ì˜ ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬

âš¡ Spring Bootë³´ë‹¤ ê°€ë³ê³  ë¹ ë¥¸ WebSocket ì§€ì›

ğŸ§¾ Swaggerë¥¼ í†µí•œ API ìë™ ë¬¸ì„œí™”

ğŸ—„ï¸ SQLAlchemy ORM ê¸°ë°˜ì˜ DB ì—°ë™

ğŸ“– ê°œë°œ ë‹¨ê³„ ìš”ì•½
ë‹¨ê³„	ì„¤ëª…
1ï¸âƒ£	í™˜ê²½ ì„¸íŒ… ë° ê¸°ë³¸ êµ¬ì¡° ìƒì„±
2ï¸âƒ£	DB ëª¨ë¸ (ì—”í‹°í‹°) ì‘ì„±
3ï¸âƒ£	CRUD & ì„œë¹„ìŠ¤ ê³„ì¸µ êµ¬ì„±
4ï¸âƒ£	API ë¼ìš°í„° êµ¬ì¶•
5ï¸âƒ£	í…œí”Œë¦¿ ë° ì •ì  ë¦¬ì†ŒìŠ¤ ì„¤ì •
6ï¸âƒ£	WebSocket ì„œë²„ êµ¬ì¶•
7ï¸âƒ£	ì›¹ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ
1ï¸âƒ£ í™˜ê²½ ì„¸íŒ…

ëª©í‘œ: FastAPI ì„œë²„ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ì¡ê³ , í™˜ê²½ë³€ìˆ˜ë¥¼ ë¶„ë¦¬í•˜ì—¬ RDS(MySQL)ì™€ ì—°ê²° ê°€ëŠ¥í•œ ìƒíƒœë¡œ ì„¸íŒ…í•œë‹¤.

ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°
WMS_FastApi/
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ requirements.txt
â””â”€â”€ app/
    â”œâ”€â”€ main.py
    â”œâ”€â”€ core/
    â”‚   â”œâ”€â”€ config.py
    â”‚   â””â”€â”€ database.py
    â”œâ”€â”€ models/
    â”œâ”€â”€ routers/
    â”œâ”€â”€ crud/
    â”œâ”€â”€ services/
    â”œâ”€â”€ schemas/
    â”œâ”€â”€ templates/
    â””â”€â”€ static/

âš™ï¸ ê°€ìƒí™˜ê²½ ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜
python3 -m venv wms
source wms/bin/activate
pip install fastapi uvicorn[standard] sqlalchemy pydantic==1.10.24 python-dotenv mysqlclient jinja2


âœ… pydantic==1.10.24: FastAPI 2.x ë²„ì „ê³¼ì˜ í˜¸í™˜ì„± ìœ ì§€ìš©
âœ… python-dotenv: .env í™˜ê²½ë³€ìˆ˜ ë¡œë“œ
âœ… mysqlclient: RDS(MySQL) ì—°ê²°ìš© ë“œë¼ì´ë²„

ğŸ§¾ .env â€” í™˜ê²½ë³€ìˆ˜ íŒŒì¼
DB_USER=root
DB_PASSWORD=password
DB_HOST=my-rds-host.amazonaws.com
DB_PORT=3306
DB_NAME=wms
DEBUG=True


âœ… .envë¥¼ ì‚¬ìš©í•˜ë©´ DB ê³„ì • ì •ë³´ê°€ ì½”ë“œì— ì§ì ‘ ë…¸ì¶œë˜ì§€ ì•ŠìŒ

ğŸ§© config.py â€” í™˜ê²½ ë³€ìˆ˜ ë¡œë”©
# app/core/config.py
from pydantic import BaseSettings

class Settings(BaseSettings):
    DB_USER: str
    DB_PASSWORD: str
    DB_HOST: str
    DB_PORT: int
    DB_NAME: str
    DEBUG: bool = True

    class Config:
        env_file = ".env"  # .env íŒŒì¼ ìë™ ë¡œë“œ

settings = Settings()


âœ… .envì— ìˆëŠ” ê°’ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ settings.DB_USER ì‹ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥
âœ… Spring Bootì˜ application.properties ì—­í• 

ğŸ§  database.py â€” DB ì—°ê²° êµ¬ì„±
# app/core/database.py
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker, declarative_base
from app.core.config import settings

DB_URL = (
    f"mysql+mysqlclient://{settings.DB_USER}:{settings.DB_PASSWORD}"
    f"@{settings.DB_HOST}:{settings.DB_PORT}/{settings.DB_NAME}"
)

engine = create_engine(DB_URL, pool_pre_ping=True)
SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
Base = declarative_base()


âœ… pool_pre_ping=True â†’ DB ì—°ê²° ëŠê¹€ ì‹œ ìë™ ë³µêµ¬
âœ… Base â†’ ëª¨ë“  ORM ëª¨ë¸ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ (Springì˜ @Entity ì—­í• )

ğŸ–¥ï¸ main.py â€” FastAPI ì„œë²„ ê¸°ë³¸ ì‹¤í–‰
from fastapi import FastAPI
from app.core.config import settings

app = FastAPI(title="WMS FastAPI Server", debug=settings.DEBUG)

@app.get("/")
def root():
    return {"message": "FastAPI ì„œë²„ ì‹¤í–‰ ì¤‘"}


ì‹¤í–‰ ëª…ë ¹ì–´:

uvicorn app.main:app --reload


âœ… ë¸Œë¼ìš°ì €ì—ì„œ http://127.0.0.1:8000
 ì ‘ì† ì‹œ
{"message": "FastAPI ì„œë²„ ì‹¤í–‰ ì¤‘"} ì¶œë ¥ â†’ ì •ìƒ ì‹¤í–‰ í™•ì¸

2ï¸âƒ£ DB ëª¨ë¸ ì‘ì„±

ëª©í‘œ: Spring Bootì˜ @Entityë¥¼ FastAPIì˜ SQLAlchemy ëª¨ë¸ë¡œ ë³€í™˜

ğŸ§© ì˜ˆì‹œ: app/models/log.py
from sqlalchemy import Column, Integer, String, BigInteger, DateTime
from app.core.database import Base

class Log(Base):
    __tablename__ = "log"

    id = Column(BigInteger, primary_key=True, autoincrement=True)
    robot_name = Column(String, nullable=False)
    pin_name = Column(String, nullable=False)
    product_name = Column(String, nullable=False)
    quantity = Column(Integer, nullable=False)
    action = Column(String, nullable=False)
    timestamp = Column(DateTime, nullable=False)


âœ… Springì˜ @Entity + @Column ë¬¸ë²•ì„ Python ë°©ì‹ìœ¼ë¡œ ë³€í™˜
âœ… nullable=False â†’ í•„ìˆ˜ ì…ë ¥ í•„ë“œ

ğŸ” DB ìƒì„± í™•ì¸
from app.core.database import Base, engine
from app.models.log import Log

Base.metadata.create_all(bind=engine)


âœ… RDS(MySQL)ì— log í…Œì´ë¸” ìë™ ìƒì„±ë¨

3ï¸âƒ£ CRUD & ì„œë¹„ìŠ¤ ê³„ì¸µ

ëª©í‘œ: ORM ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„° ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ, ì¡°íšŒ ê¸°ëŠ¥ êµ¬í˜„

ğŸ§© app/crud/log_crud.py
from sqlalchemy.orm import Session
from app.models.log import Log

def create_log(db: Session, data: dict):
    log = Log(**data)
    db.add(log)
    db.commit()
    db.refresh(log)
    return log

def get_logs(db: Session):
    return db.query(Log).all()


âœ… commit() â†’ ì‹¤ì œ DB ë°˜ì˜
âœ… refresh() â†’ DB ë°˜ì˜ í›„ ìµœì‹  ìƒíƒœë¡œ ê°±ì‹ 

âš™ï¸ app/services/log_service.py
from sqlalchemy.orm import Session
from app.crud import log_crud

class LogService:
    def __init__(self, db: Session):
        self.db = db

    def list_logs(self):
        return log_crud.get_logs(self.db)


âœ… Springì˜ @Service ì—­í•  â€” CRUD í˜¸ì¶œ ë¡œì§ ë¶„ë¦¬

4ï¸âƒ£ API ë¼ìš°í„° êµ¬ì¶•

ëª©í‘œ: CRUD ê¸°ëŠ¥ì„ RESTful API í˜•íƒœë¡œ ì™¸ë¶€ì— ì œê³µ

ğŸ§© app/routers/log_router.py
from fastapi import APIRouter, Depends
from sqlalchemy.orm import Session
from app.core.database import SessionLocal
from app.crud import log_crud

router = APIRouter(prefix="/logs", tags=["Logs"])

def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

@router.get("/")
def read_logs(db: Session = Depends(get_db)):
    return log_crud.get_logs(db)


âœ… @router.get() â†’ Springì˜ @GetMapping ëŒ€ì‘
âœ… Depends(get_db) â†’ DB ì„¸ì…˜ ìë™ ì£¼ì…

ğŸ§  main.py ë¼ìš°í„° ë“±ë¡
from app.routers import log_router
app.include_router(log_router.router)


âœ… ë¼ìš°í„°ë¥¼ í†µí•´ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ê´€ë¦¬
âœ… Swagger ìë™ ë¬¸ì„œí™” í™œì„±í™” â†’ http://127.0.0.1:8000/docs

5ï¸âƒ£ ì •ì  ë¦¬ì†ŒìŠ¤ & í…œí”Œë¦¿

ëª©í‘œ: HTML + CSS + JS ê¸°ë°˜ ëŒ€ì‹œë³´ë“œ êµ¬ì„±

ğŸ“ êµ¬ì¡°
app/
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ index.html
â””â”€â”€ static/
    â”œâ”€â”€ css/style.css
    â”œâ”€â”€ js/main.js
    â””â”€â”€ images/

ğŸ§© index.html (ìš”ì•½)
<body>
  <main>
    <div class="log">
      <p class="log_t">ì‘ì—… ë‚´ì—­</p>
      <p class="log_text">ì‘ì—… ë‚´ì—­ ë‚˜ì˜¤ëŠ” ê³³</p>
    </div>
  </main>
  <script src="/static/js/main.js"></script>
</body>

âš™ï¸ main.py ìˆ˜ì •
from fastapi.templating import Jinja2Templates
from fastapi.staticfiles import StaticFiles
from fastapi.responses import HTMLResponse

app.mount("/static", StaticFiles(directory="app/static"), name="static")
templates = Jinja2Templates(directory="app/templates")

@app.get("/", response_class=HTMLResponse)
async def root(request: Request):
    return templates.TemplateResponse("index.html", {"request": request})


âœ… StaticFiles: /static ê²½ë¡œë¡œ CSS/JS ì œê³µ
âœ… TemplateResponse: HTML í…œí”Œë¦¿ ë Œë”ë§

6ï¸âƒ£ WebSocket êµ¬ì¶• (ë¡œì»¬ â†” EC2)

ëª©í‘œ: ROS ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì‹ í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì— ë¸Œë¡œë“œìºìŠ¤íŠ¸

ğŸ§© main.py (WebSocket ì¶”ê°€)
from fastapi import WebSocket, WebSocketDisconnect
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

active_connections = []

@app.websocket("/ws")
async def websocket_endpoint(websocket: WebSocket):
    await websocket.accept()
    active_connections.append(websocket)
    print("[EC2] WebSocket connected")

    try:
        while True:
            data = await websocket.receive_text()
            for conn in list(active_connections):
                try:
                    await conn.send_text(data)
                except:
                    active_connections.remove(conn)
    except WebSocketDisconnect:
        active_connections.remove(websocket)


âœ… ì‹ ê·œ ê¸°ëŠ¥

active_connections: ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ ê´€ë¦¬

WebSocketDisconnect: ì—°ê²° ëŠê¹€ ìë™ ì •ë¦¬

7ï¸âƒ£ ì›¹ í´ë¼ì´ì–¸íŠ¸ ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ

ëª©í‘œ: WebSocketì„ í†µí•´ ë°›ì€ ROS ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ HTMLì— í‘œì‹œ

ğŸ§© static/js/main.js
const ws = new WebSocket("ws://" + window.location.host + "/ws");

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    document.querySelector(".log_text").innerText =
        `X: ${data.x}, Y: ${data.y}, Î¸: ${data.theta}`;
};


âœ… window.location.host â†’ í˜„ì¬ ì ‘ì† ì„œë²„ ì£¼ì†Œ ìë™ ì¸ì‹
âœ… onmessage â†’ ë°ì´í„° ìˆ˜ì‹  ì‹œë§ˆë‹¤ í™”ë©´ ì—…ë°ì´íŠ¸

âœ… ì‹¤í–‰ ìˆœì„œ
ë‹¨ê³„	ëª…ë ¹ì–´	ì„¤ëª…
1	uvicorn app.main:app --host 0.0.0.0 --port 8000	EC2 ì„œë²„ ì‹¤í–‰
2	python ws_client.py	ë¡œì»¬ ROS ë°ì´í„° ì „ì†¡
3	ë¸Œë¼ìš°ì € ì ‘ì†: http://<EC2_IP>:8000	ëŒ€ì‹œë³´ë“œ í™•ì¸
4	WebSocket ë¡œê·¸	[CLIENT] Received: ë©”ì‹œì§€ ì¶œë ¥
âš¡ ì£¼ìš” ë³€ê²½ ìš”ì•½
ìœ„ì¹˜	ì¶”ê°€ëœ ê¸°ëŠ¥	ì„¤ëª…
config.py	.env ë¡œë“œ	Spring application.properties ëŒ€ì²´
database.py	SessionLocal, Base êµ¬ì„±	ORM ê¸°ë°˜ DB ì—°ê²°
main.py	CORS + WebSocket ì¶”ê°€	ì™¸ë¶€ ì ‘ì† ë° ì‹¤ì‹œê°„ í†µì‹  ê°€ëŠ¥
/routers	APIRouter ê´€ë¦¬	ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• 
/static/js/main.js	ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ	ROS â†’ ì›¹ ë¸Œë¼ìš°ì € ì¶œë ¥
ğŸ¯ ì™„ì„± ê²°ê³¼

âœ… EC2 ì„œë²„ì—ì„œ FastAPI ì •ìƒ êµ¬ë™
âœ… RDS ì—°ë™ ë° CRUD API ì‘ë™
âœ… ROS â†’ ë¡œì»¬ â†’ EC2 â†’ ì›¹ ì‹¤ì‹œê°„ ë°ì´í„° ì†¡ìˆ˜ì‹ 
âœ… Swagger UI ìë™ ìƒì„± (/docs)
âœ… HTML + JS ê¸°ë°˜ ëŒ€ì‹œë³´ë“œì—ì„œ ì‹¤ì‹œê°„ í‘œì‹œ
